# Прототип приложения проверки информаци на сайте

### Основные моменты

- Приложения докеризованы (чтобы не думать как разворачивать)
- Сервисы на Python, хотя из уникального питонячьего в них только очистка сайта от html при помощи BeautifullSoup

### Приложение для парсинга

#### Основные моменты

- Приложение на flask, хотя ничего специфичного не используется, поэтому легко заменяется на что угодно другое.
- Используем selenium + BeautifullSoup
- Selenium используется для извлечения названия компании и ИНН для некоторых специально отобранных сайтов
- Остальная информация о работодателе извлекается из текстового представления сайта
- При сборке нужно положить файл chromedriver в папку с проектом search_app/scrap_app/  (скачать можно отсюда https://googlechromelabs.github.io/chrome-for-testing/)


Реализованные контроллеры:

- /parse 
Контроллер для извлечение структурированной информации о работодателе
Ожидаемый JSON payload (raw body в JSON формате):
```JSON
{
    "url": "https://example.com",
    "phone": "+7 (999) 999-99-99",
    "email": "example@example.com",
    "site": "https://example.com",
    "organization_name": "ИП Иванов",
    "contact_person_name": "Иванов Иван",
    "code": ""
}
```

Ответ в формате JSON
```JSON
{
    "employer_info": {
        "contact_person_name": null,
        "email": "some@email.ru",
        "inn_code": "1234567890",
        "organization_name": "Название организации",
        "phone": "+7 (999) 999 99 99",
        "site": "some.site.ru"
    }
}
```


- /text
Контроллер для получения текстового представления указанного сайта
```JSON
{
    "url": "https://example.com"
}
```

Ответ в формате JSON
```JSON
{
    "text": "Длинная-предлинная строка с содержимым сайта без html тегов"
}
```


### Приложение для поиска
  
#### Основные моменты

- Приложение на flask, хотя ничего специфичного не используется, поэтому легко заменяется на что угодно другое.
- Используем Яндекс Search Api v2 (поскольку поддержка v1 прекращаетсся в этом году)


Реализованные контроллеры:

- /search
Контроллер для получения списка ссылок из поисковой выдачи

Ожидаемый JSON payload (raw body в JSON формате):
```JSON
{
    "query_text": "Поисковый запрос",
    "folder_id": "id каталога из яндекс облака",
    "page_size": 10,
    "api_key": "apikey"
}
```

_folder_id_ - идентификатор каталога. Можно посмотреть на странице каталогов в консоли яндекс cloud (console.yandex.cloud/cloud)
_api_key_ - api ключ технической учетки от лица которой выполняется поиск


Ответ в формате JSON
```JSON
{
    "results": [
        "https://some.site1.ru/",
        "https://yandex.ru/maps/org/some.site/1236750269/",
        "..."
    ]
}
```

P.S. Апи яндекса платное. Каждый запрос, в т.ч. тестовый стоит около 48 копеек.
